// 
// Decompiled by Procyon v0.5.36
// 

package me.sazked.leux.client.modules.exploit;

import me.sazked.leux.client.modules.Category;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;
import me.sazked.leux.client.util.BlockInteractHelper;
import me.sazked.leux.client.util.MessageUtil;
import com.mojang.realmsclient.gui.ChatFormatting;
import me.sazked.leux.client.util.InventoryUtil;
import net.minecraft.init.Blocks;
import me.sazked.leux.client.guiscreen.settings.Setting;
import net.minecraft.util.math.BlockPos;
import me.sazked.leux.client.modules.Module;

public class Burrow extends Module
{
    public BlockPos originalPos;
    public Setting instant;
    public Setting jump;
    public Setting enderchest;
    public float oldTickLength;
    public Setting rubberband;
    
    @Override
    public void update() {
        if (Burrow.mc.player.posY > this.originalPos.getY() + Double.longBitsToDouble(Double.doubleToLongBits(5.457115000499588) ^ 0x7FE518D938AA6C49L)) {
            final int obf = Burrow.mc.player.inventory.currentItem;
            if (this.enderchest.get_value(true) && InventoryUtil.getHotbarSlot(Blocks.ENDER_CHEST) != -1) {
                Burrow.mc.player.inventory.currentItem = InventoryUtil.getHotbarSlot(Blocks.ENDER_CHEST);
            }
            else {
                if (InventoryUtil.getHotbarSlot(Blocks.OBSIDIAN) == -1) {
                    MessageUtil.send_client_message("" + ChatFormatting.RESET + "You have Ender Chest but not Obsidian, enable Ender Chest mode");
                    this.set_disable();
                    return;
                }
                Burrow.mc.player.inventory.currentItem = InventoryUtil.getHotbarSlot(Blocks.OBSIDIAN);
            }
            if (this.jump.in("Packet")) {
                BlockInteractHelper.placeBlockTwo(this.originalPos);
            }
            else {
                BlockInteractHelper.placeBlock(this.originalPos);
            }
            Burrow.mc.player.inventory.currentItem = obf;
            if (this.rubberband.in("Classic")) {
                Burrow.mc.player.jump();
            }
            else if (this.rubberband.in("Secure")) {
                Burrow.mc.player.motionY = Double.longBitsToDouble(Double.doubleToLongBits(0.678881656667097) ^ 0x7FEDB9660627A9D6L);
            }
            else {
                Burrow.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Burrow.mc.player.posX, Burrow.mc.player.posY + Double.longBitsToDouble(Double.doubleToLongBits(0.7351707029363418) ^ 0x7FE78684B5C2D86DL), Burrow.mc.player.posZ, true));
            }
            this.set_disable();
        }
    }
    
    @Override
    public void enable() {
        this.oldTickLength = Burrow.mc.timer.tickLength;
        this.originalPos = new BlockPos(Burrow.mc.player.posX, Burrow.mc.player.posY, Burrow.mc.player.posZ);
        if (this.instant.get_value(true)) {
            Burrow.mc.timer.tickLength = Float.intBitsToFloat(Float.floatToIntBits(19.756071f) ^ 0x7E1E0C6F);
        }
        if (Burrow.mc.world.getBlockState(new BlockPos(Burrow.mc.player.posX, Burrow.mc.player.posY, Burrow.mc.player.posZ)).getBlock().equals(Blocks.OBSIDIAN) || Burrow.mc.world.getBlockState(new BlockPos(Burrow.mc.player.posX, Burrow.mc.player.posY, Burrow.mc.player.posZ)).getBlock().equals(Blocks.ENDER_CHEST)) {
            MessageUtil.send_client_message("" + ChatFormatting.RESET + "You are already in Obsidian / Ender Chest");
            this.set_disable();
            return;
        }
        if (BlockInteractHelper.isInterceptedByOther(this.originalPos)) {
            MessageUtil.send_client_message("" + ChatFormatting.RESET + "You are intercepted by an entity");
            this.set_disable();
            return;
        }
        if (InventoryUtil.getHotbarSlot(Blocks.OBSIDIAN) == -1 && InventoryUtil.getHotbarSlot(Blocks.ENDER_CHEST) == -1) {
            MessageUtil.send_client_message("" + ChatFormatting.RESET + "You don't have Obsidian or EnderChest in your hotbar");
            this.set_disable();
            return;
        }
        if (this.jump.in("Packet")) {
            Burrow.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Burrow.mc.player.posX, Burrow.mc.player.posY + Double.longBitsToDouble(Double.doubleToLongBits(26.262575932769685) ^ 0x7FE0A27F8D23F647L), Burrow.mc.player.posZ, true));
            Burrow.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Burrow.mc.player.posX, Burrow.mc.player.posY + Double.longBitsToDouble(Double.doubleToLongBits(3.2602390803528527) ^ 0x7FE20ECEE26FFB66L), Burrow.mc.player.posZ, true));
            Burrow.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Burrow.mc.player.posX, Burrow.mc.player.posY + Double.longBitsToDouble(Double.doubleToLongBits(7.561932894646061) ^ 0x7FEE3A13B61DB096L), Burrow.mc.player.posZ, true));
            Burrow.mc.player.connection.sendPacket((Packet)new CPacketPlayer.Position(Burrow.mc.player.posX, Burrow.mc.player.posY + Double.longBitsToDouble(Double.doubleToLongBits(9.34669885235341) ^ 0x7FD019E0AC247B39L), Burrow.mc.player.posZ, true));
        }
        else {
            Burrow.mc.player.jump();
        }
    }
    
    public Burrow() {
        super(Category.exploit);
        this.jump = this.create("Jump", "Jump", "Classic", this.combobox("Classic", "Packet"));
        this.rubberband = this.create("Rubberband", "Rubberband", "Secure", this.combobox("Classic", "Secure", "Packet"));
        this.instant = this.create("Instant", "Instant", true);
        this.enderchest = this.create("Ender Chest", "EnderChest", false);
        this.oldTickLength = Burrow.mc.timer.tickLength;
        this.name = "Burrow";
        this.tag = "Burrow";
        this.description = "you are really gay";
    }
    
    @Override
    public String array_detail() {
        return this.jump.get_current_value() + " + " + this.rubberband.get_current_value();
    }
    
    @Override
    public void disable() {
        Burrow.mc.timer.tickLength = this.oldTickLength;
    }
}
